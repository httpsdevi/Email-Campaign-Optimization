<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Campaign Funnel Simulation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .panel {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
        }

        .panel h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .campaign-builder {
            grid-column: span 2;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.2);
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #95e1d3, #4facfe);
        }

        .btn-danger {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        }

        .campaigns-list {
            margin-top: 20px;
        }

        .campaign-item {
            background: #f8f9ff;
            border: 1px solid #e1e5ff;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .campaign-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .campaign-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .campaign-title {
            font-weight: 600;
            color: #667eea;
            font-size: 1.1rem;
        }

        .campaign-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-paused {
            background: #fff3cd;
            color: #856404;
        }

        .status-completed {
            background: #cce7ff;
            color: #004085;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transform: perspective(1000px) rotateX(0deg);
            transition: transform 0.3s ease;
        }

        .metric-card:hover {
            transform: perspective(1000px) rotateX(5deg) translateY(-5px);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .audience-segments {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .segment-card {
            background: linear-gradient(135deg, #95e1d3, #4facfe);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .segment-size {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .email-preview {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
        }

        .email-header {
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        .subject-line {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .from-line {
            color: #666;
            font-size: 0.9rem;
        }

        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 8px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .drip-sequence {
            margin-top: 20px;
        }

        .drip-email {
            background: white;
            border: 1px solid #e1e5ff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            position: relative;
            transition: all 0.3s ease;
        }

        .drip-email:hover {
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        }

        .drip-day {
            position: absolute;
            top: -5px;
            left: 15px;
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 80%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #667eea;
        }

        .test-results {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .campaign-builder {
                grid-column: span 1;
            }
            
            h1 {
                font-size: 2rem;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ“§ Email Campaign Funnel Simulation</h1>
        
        <div class="dashboard">
            <!-- Campaign Builder -->
            <div class="panel campaign-builder">
                <h2>Campaign Builder</h2>
                <form id="campaignForm">
                    <div class="form-group">
                        <label for="campaignName">Campaign Name</label>
                        <input type="text" id="campaignName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="campaignType">Campaign Type</label>
                        <select id="campaignType" required>
                            <option value="">Select Type</option>
                            <option value="welcome">Welcome Series</option>
                            <option value="nurture">Lead Nurturing</option>
                            <option value="product">Product Showcase</option>
                            <option value="retention">Customer Retention</option>
                            <option value="reengagement">Re-engagement</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="audienceSegment">Target Audience</label>
                        <select id="audienceSegment" required>
                            <option value="">Select Segment</option>
                            <option value="new-leads">New Leads</option>
                            <option value="qualified-prospects">Qualified Prospects</option>
                            <option value="existing-customers">Existing Customers</option>
                            <option value="inactive-users">Inactive Users</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="emailCount">Number of Emails</label>
                        <select id="emailCount">
                            <option value="3">3 Emails</option>
                            <option value="5" selected>5 Emails</option>
                            <option value="7">7 Emails</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="btn">Create Campaign</button>
                    <button type="button" class="btn btn-secondary" onclick="openABTestModal()">A/B Test Subject Lines</button>
                </form>
            </div>
            
            <!-- Analytics Dashboard -->
            <div class="panel">
                <h2>Campaign Analytics</h2>
                <div class="analytics-grid">
                    <div class="metric-card">
                        <div class="metric-value" id="totalCampaigns">0</div>
                        <div class="metric-label">Active Campaigns</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="avgOpenRate">0%</div>
                        <div class="metric-label">Avg Open Rate</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="avgClickRate">0%</div>
                        <div class="metric-label">Avg Click Rate</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="totalLeads">0</div>
                        <div class="metric-label">Leads Generated</div>
                    </div>
                </div>
            </div>
            
            <!-- Audience Segments -->
            <div class="panel">
                <h2>Audience Segments</h2>
                <div class="audience-segments">
                    <div class="segment-card">
                        <div class="segment-size">2,450</div>
                        <div>New Leads</div>
                    </div>
                    <div class="segment-card">
                        <div class="segment-size">1,820</div>
                        <div>Qualified Prospects</div>
                    </div>
                    <div class="segment-card">
                        <div class="segment-size">3,670</div>
                        <div>Existing Customers</div>
                    </div>
                    <div class="segment-card">
                        <div class="segment-size">950</div>
                        <div>Inactive Users</div>
                    </div>
                </div>
            </div>
            
            <!-- Campaign List -->
            <div class="panel">
                <h2>Campaign Management</h2>
                <div id="campaignsList" class="campaigns-list">
                    <!-- Campaigns will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- A/B Test Modal -->
    <div id="abTestModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>A/B Test Subject Lines</h2>
            <form id="abTestForm">
                <div class="form-group">
                    <label for="subjectA">Subject Line A</label>
                    <input type="text" id="subjectA" placeholder="e.g., Unlock Your Business Potential Today!">
                </div>
                <div class="form-group">
                    <label for="subjectB">Subject Line B</label>
                    <input type="text" id="subjectB" placeholder="e.g., 5 Strategies to Boost Your Revenue">
                </div>
                <div class="form-group">
                    <label for="testSize">Test Sample Size (%)</label>
                    <select id="testSize">
                        <option value="10">10%</option>
                        <option value="20" selected>20%</option>
                        <option value="30">30%</option>
                    </select>
                </div>
                <button type="submit" class="btn">Run A/B Test</button>
            </form>
            <div id="testResults" class="test-results" style="display: none;">
                <!-- Test results will appear here -->
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let campaigns = [];
        let campaignIdCounter = 1;

        // Email templates for different campaign types
        const emailTemplates = {
            welcome: [
                { day: 0, subject: "Welcome to [Company]! Let's get started", type: "Welcome" },
                { day: 2, subject: "Your first steps to success", type: "Onboarding" },
                { day: 5, subject: "Resources to help you succeed", type: "Educational" },
                { day: 8, subject: "Meet our customer success team", type: "Introduction" },
                { day: 12, subject: "Your progress so far", type: "Progress Check" }
            ],
            nurture: [
                { day: 0, subject: "Solving [Pain Point] in your industry", type: "Problem Identification" },
                { day: 3, subject: "Case study: How [Company] increased ROI by 40%", type: "Social Proof" },
                { day: 7, subject: "5 strategies to optimize your workflow", type: "Educational" },
                { day: 10, subject: "Free consultation: Discuss your challenges", type: "Consultation Offer" },
                { day: 14, subject: "Ready to transform your business?", type: "Sales Pitch" }
            ],
            product: [
                { day: 0, subject: "Introducing our game-changing solution", type: "Product Introduction" },
                { day: 2, subject: "See [Product] in action (Demo video)", type: "Demo" },
                { day: 5, subject: "What customers are saying about [Product]", type: "Testimonials" },
                { day: 8, subject: "Limited time: 30% off your first year", type: "Special Offer" },
                { day: 12, subject: "Last chance: Offer expires soon", type: "Urgency" }
            ],
            retention: [
                { day: 0, subject: "Thank you for being a valued customer", type: "Appreciation" },
                { day: 3, subject: "New features to enhance your experience", type: "Feature Update" },
                { day: 7, subject: "Tips to maximize your [Product] usage", type: "Best Practices" },
                { day: 10, subject: "Exclusive customer-only benefits", type: "Loyalty Rewards" },
                { day: 14, subject: "We'd love your feedback", type: "Feedback Request" }
            ],
            reengagement: [
                { day: 0, subject: "We miss you! Here's what's new", type: "Re-engagement" },
                { day: 3, subject: "Special comeback offer just for you", type: "Win-back Offer" },
                { day: 7, subject: "See what you've been missing", type: "FOMO" },
                { day: 10, subject: "Final attempt: We want you back", type: "Last Chance" },
                { day: 14, subject: "We'll remove you from our list", type: "Unsubscribe Warning" }
            ]
        };

        // Campaign form submission
        document.getElementById('campaignForm').addEventListener('submit', function(e) {
            e.preventDefault();
            createCampaign();
        });

        function createCampaign() {
            const name = document.getElementById('campaignName').value;
            const type = document.getElementById('campaignType').value;
            const segment = document.getElementById('audienceSegment').value;
            const emailCount = parseInt(document.getElementById('emailCount').value);

            const campaign = {
                id: campaignIdCounter++,
                name: name,
                type: type,
                segment: segment,
                emailCount: emailCount,
                status: 'active',
                created: new Date(),
                emails: emailTemplates[type].slice(0, emailCount),
                metrics: generateRandomMetrics()
            };

            campaigns.push(campaign);
            updateDashboard();
            renderCampaigns();
            document.getElementById('campaignForm').reset();
            
            // Add success animation
            const button = document.querySelector('#campaignForm button[type="submit"]');
            button.textContent = 'Created!';
            button.style.background = 'linear-gradient(45deg, #28a745, #20c997)';
            setTimeout(() => {
                button.textContent = 'Create Campaign';
                button.style.background = 'linear-gradient(45deg, #667eea, #764ba2)';
            }, 2000);
        }

        function generateRandomMetrics() {
            return {
                openRate: Math.floor(Math.random() * 30) + 15, // 15-45%
                clickRate: Math.floor(Math.random() * 8) + 2,   // 2-10%
                conversionRate: Math.floor(Math.random() * 3) + 1, // 1-4%
                unsubscribeRate: Math.random() * 2 + 0.1,      // 0.1-2.1%
                leads: Math.floor(Math.random() * 50) + 10      // 10-60 leads
            };
        }

        function updateDashboard() {
            const activeCampaigns = campaigns.filter(c => c.status === 'active').length;
            const avgOpenRate = campaigns.length > 0 ? 
                Math.round(campaigns.reduce((sum, c) => sum + c.metrics.openRate, 0) / campaigns.length) : 0;
            const avgClickRate = campaigns.length > 0 ? 
                Math.round(campaigns.reduce((sum, c) => sum + c.metrics.clickRate, 0) / campaigns.length) : 0;
            const totalLeads = campaigns.reduce((sum, c) => sum + c.metrics.leads, 0);

            document.getElementById('totalCampaigns').textContent = activeCampaigns;
            document.getElementById('avgOpenRate').textContent = avgOpenRate + '%';
            document.getElementById('avgClickRate').textContent = avgClickRate + '%';
            document.getElementById('totalLeads').textContent = totalLeads;

            // Add animation to metrics
            document.querySelectorAll('.metric-card').forEach(card => {
                card.classList.add('pulse');
                setTimeout(() => card.classList.remove('pulse'), 1000);
            });
        }

        function renderCampaigns() {
            const container = document.getElementById('campaignsList');
            container.innerHTML = '';

            campaigns.forEach(campaign => {
                const campaignElement = createCampaignElement(campaign);
                container.appendChild(campaignElement);
            });
        }

        function createCampaignElement(campaign) {
            const div = document.createElement('div');
            div.className = 'campaign-item fade-in';
            
            const statusClass = `status-${campaign.status}`;
            const statusText = campaign.status.charAt(0).toUpperCase() + campaign.status.slice(1);
            
            div.innerHTML = `
                <div class="campaign-header">
                    <div class="campaign-title">${campaign.name}</div>
                    <div class="campaign-status ${statusClass}">${statusText}</div>
                </div>
                <div style="color: #666; margin-bottom: 10px;">
                    ${campaign.type.charAt(0).toUpperCase() + campaign.type.slice(1)} â€¢ ${campaign.segment}
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <small style="color: #888;">
                        Open: ${campaign.metrics.openRate}% | Click: ${campaign.metrics.clickRate}% | Leads: ${campaign.metrics.leads}
                    </small>
                    <div>
                        <button class="btn" style="padding: 5px 10px; font-size: 12px;" onclick="viewCampaign(${campaign.id})">View Details</button>
                        <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;" onclick="toggleCampaign(${campaign.id})">${campaign.status === 'active' ? 'Pause' : 'Resume'}</button>
                        <button class="btn btn-danger" style="padding: 5px 10px; font-size: 12px;" onclick="deleteCampaign(${campaign.id})">Delete</button>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${Math.min(campaign.metrics.openRate * 2, 100)}%"></div>
                </div>
                <div class="drip-sequence">
                    ${campaign.emails.map(email => `
                        <div class="drip-email">
                            <div class="drip-day">Day ${email.day}</div>
                            <div style="margin-top: 10px;">
                                <strong>${email.subject}</strong>
                                <div style="color: #666; font-size: 0.9rem; margin-top: 5px;">${email.type}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            return div;
        }

        function viewCampaign(id) {
            const campaign = campaigns.find(c => c.id === id);
            if (!campaign) return;

            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>${campaign.name} - Detailed Analytics</h2>
                    <div class="analytics-grid" style="margin: 20px 0;">
                        <div class="metric-card">
                            <div class="metric-value">${campaign.metrics.openRate}%</div>
                            <div class="metric-label">Open Rate</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${campaign.metrics.clickRate}%</div>
                            <div class="metric-label">Click Rate</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${campaign.metrics.conversionRate}%</div>
                            <div class="metric-label">Conversion Rate</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${campaign.metrics.leads}</div>
                            <div class="metric-label">Leads Generated</div>
                        </div>
                    </div>
                    <h3>Email Performance</h3>
                    ${campaign.emails.map((email, index) => `
                        <div class="email-preview">
                            <div class="email-header">
                                <div class="subject-line">Email ${index + 1}: ${email.subject}</div>
                                <div class="from-line">Day ${email.day} â€¢ ${email.type}</div>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>Opens: ${Math.floor(Math.random() * 500) + 100}</span>
                                <span>Clicks: ${Math.floor(Math.random() * 100) + 20}</span>
                                <span>Replies: ${Math.floor(Math.random() * 15) + 2}</span>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            document.body.appendChild(modal);
        }

        function toggleCampaign(id) {
            const campaign = campaigns.find(c => c.id === id);
            if (campaign) {
                campaign.status = campaign.status === 'active' ? 'paused' : 'active';
                updateDashboard();
                renderCampaigns();
            }
        }

        function deleteCampaign(id) {
            if (confirm('Are you sure you want to delete this campaign?')) {
                campaigns = campaigns.filter(c => c.id !== id);
                updateDashboard();
                renderCampaigns();
            }
        }

        // A/B Testing Modal
        function openABTestModal() {
            document.getElementById('abTestModal').style.display = 'block';
        }

        document.querySelector('.close').addEventListener('click', function() {
            document.getElementById('abTestModal').style.display = 'none';
        });

        document.getElementById('abTestForm').addEventListener('submit', function(e) {
            e.preventDefault();
            runABTest();
        });

        function runABTest() {}
            const subjectA = document.getElementById('subjectA').value;
            const subjectB = document.getElementById('subjectB').value;
            const testSize = document.getElementById('testSize').value;

            // Simulate A/B test results
            const openRateA = Math.floor(Math.random() * 30) + 15;
            const openRateB = Math.floor(Math.random() * 30) + 15;
            const clickRateA = Math.floor(Math.random() * 8) + 2;
            const clickRateB = Math.floor(Math.random() * 8) + 2;

            const winner = openRateA > openRateB ? 'A' : 'B';
            const improvement = Math.abs(openRateA - openRateB);

            const resultsDiv = document.getElementById('testResults');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = `
                <h3>A/B Test Results</h3>
                <div style="margin: 15px 0;">
                    <strong>Subject Line A:</strong> "${subjectA}"<br>
                    Open Rate: ${openRateA}% | Click Rate: ${clickRateA}%
                </div>
                <div style="margin: 15px 0;">
                    <strong>Subject Line B:</strong> "${subjectB}"<br>
                    Open Rate: ${openRateB}% | Click Rate: ${clickRateB}%
                </div>
                <div style="padding: 15px; background: ${winner === 'A' ? '#d4edda' : '#cce7ff'}; border-radius: 8px; margin-top: 15px;">
                    <strong>Winner: Subject Line ${winner}</strong><br>
                    Improvement: +${improvement}% open rate<br>
                    Sample Size: ${testSize}% of audience
                </div>
                <div style="margin-top: 15px; color: #666;">
                    <small>
                    